<!doctype html>
<html>
  <head>
    <title>image</title>
    <meta charset = 'utf-8'>
    <style>
      * {
        padding: 0;
        margin: 0;
      }
      body { overflow: hidden; }
    </style>
    <script type = 'text/javascript' src = './../../../42eng/eng.js'></script>
  </head>
  <body>
    <script type = 'text/javascript'>
      
      cfg.debug = true;
      cfg.modulepath = './../../../42eng/modules/';
      cfg.grid = 64;
      cfg.window.fps = 60;

      let gr;

      Add.rule({
        'space': 'active'
      });

      const canvas = Add.canvas(

        async function() { // загрузчик:

          // загрузка модулей:
          await Add.module('graphics', 'language', 'byte');

          await Add.language('./en.json', 'en', false);
          await Add.language('./ru.json', 'ru', true);

          gr = graphics.create(canvas.cvs);

          Add.debug('Загрузка завершена!');
        },

        function(t) { // игровой процесс:
          if (!gr) return;

          const w = canvas.id.width,
                h = canvas.id.height;

          gr.rect(0, 0, w, h, '#000');

          let size = w;
          if (w > h) size = h;


          gr.text.drawMultiLine(
            language.use('test') + ' ' + language.use('select', language.select),
            w * .5, h * .5, w * .5,
            '#fff', 1,
            size * .05, undefined,
            'center-middle'
          );
          
          if (bind.check('active')) {
            const langs = Object.keys(language.table),
                  current = langs.indexOf(language.select);
            language.select = langs[(current + 1) % langs.length];
            bind.clear('active');
          }
        }

      );

      canvas.init();
      canvas.update();

    </script>
  </body>
</html>